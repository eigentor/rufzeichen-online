diff --git a/includes/jplayer.theme.inc b/includes/jplayer.theme.inc
index aba436a..aa90009 100644
--- a/includes/jplayer.theme.inc
+++ b/includes/jplayer.theme.inc
@@ -105,6 +105,7 @@ function jplayer_sort_files($raw_files = array(), $player_id, $type = 'single')
   $files = array();
   $extensions = array();
   $playlist = array();
+  $player_type = 'audio';
   
   // Look through all the files provided and see what we have
   foreach($raw_files as $delta => $item) {
@@ -132,11 +133,11 @@ function jplayer_sort_files($raw_files = array(), $player_id, $type = 'single')
     // Add file into correct group
     if (in_array($item['ext'], $video_extensions)) {
       $videos = TRUE;
-      $item['type'] = 'audio';
+      $item['type'] = 'video';
     }
     else if (in_array($item['ext'], $audio_extensions)) {
       $audio = TRUE;
-      $item['type'] = 'video';
+      $item['type'] = 'audio';
     }
     else if (in_array($item['ext'], $poster_extensions)) {
       $poster = $item['url'];
@@ -148,19 +149,28 @@ function jplayer_sort_files($raw_files = array(), $player_id, $type = 'single')
   
   $num = 0;
   foreach ($media as $file) {
-    if ($videos == TRUE && $type != 'playlist') {
-      if ($file['type'] == 'audio') {
-        unset($file);
+
+    // if there are videos to play, and mode is single,
+    // then ignore any audio files present.
+    if ($videos == TRUE) {
+
+      if ($type == 'playlist') {
+        $player_type = 'video';
+      }
+      else /* single */ {
+	if ($file['type'] == 'audio') {
+	  unset($file);
+	}
+	$player_type = 'video';
       }
-      $player_type = 'video';
-    }
-    else if ($videos == TRUE && $type == 'playlist') {
-      $player_type = 'video';
     }
     else {
       $player_type = 'audio';
     }
+
     
+    // accumulate lists of file urls, file extensions, and playlist info
+    // to pass back.
     if (isset($file) && $file['type'] == 'audio') {
       $files[][$file['ext']] = $file['url'];
       $extensions[] = $file['ext'];
@@ -169,7 +179,8 @@ function jplayer_sort_files($raw_files = array(), $player_id, $type = 'single')
     }
     else if (isset($file) && $file['type'] == 'video') {
       $files[][$file['ext']] = $file['url'];
-      if ($poster != NULL) {
+      
+      if ($poster != NULL) { // handle posters (gif's etc) together with video
         $files[]['poster'] = $poster;
       }
       $extensions[] = $file['ext'];
@@ -178,6 +189,7 @@ function jplayer_sort_files($raw_files = array(), $player_id, $type = 'single')
     }
   }
   
+  // in single mode, there's no playlist after all - zap it.
   if ($type == 'single') {
     $item = array_shift($playlist);
     $playlist = array();
@@ -220,4 +232,4 @@ function template_preprocess_jplayer_view_playlist(&$vars) {
   drupal_add_js($player, 'setting');
   
   $vars['dynamic'] = jplayer_add_core_js();
-}
\ No newline at end of file
+}
